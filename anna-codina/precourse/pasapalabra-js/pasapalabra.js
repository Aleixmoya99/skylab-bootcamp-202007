var questions = [
    letterA = [
        { letter: "a", answer: "abducir", status: 0, question: "CON LA A. Dicho de una supuesta criatura extraterrestre: Apoderarse de alguien"},
        { letter: "a", answer: "armario", status: 0, question: "CON LA A. Mueble cerrado con puertas y, generalmente, con estantes, cajones y perchas para guardar ropa y otros objetos"},
        { letter: "a", answer: "arbol", status: 0, question: "CON LA A. Planta de tronco leñoso, grueso y elevado que se ramifica a cierta altura del suelo formando la copa"},
    ],

    letterB = [
        { letter: "b", answer: "bingo", status: 0, question: "CON LA B. Juego que ha sacado de quicio a todos los 'Skylabers' en las sesiones de precurso"},
        { letter: "b", answer: "bazo", status: 0, question: "CON LA B. Víscera vascular de muchos vertebrados situada en la región del hipocondrio izquierdo; desempeña diversas funciones relacionadas con la sangre y el sistema inmunológico"},
        { letter: "b", answer: "barbacoa", status: 0, question: "CON LA B. Famosa canción de Georgie Dan"},
    ],

    letterC = [
        { letter: "c", answer: "churumbel", status: 0, question: "CON LA C. Niño, crío, bebé"},
        { letter: "c", answer: "cascarrabias", status: 0, question: "CON LA C. Persona que se enfada con facilidad o por poco motivo"},
        { letter: "c", answer: "cthulhu", status: 0, question: "CON LA C. Profundo lovecraftiano con nombre inpronunciable"},
    ],
    LetterD = [
        { letter: "d", answer: "diarrea", status: 0, question: "CON LA D. Anormalidad en la función del aparato digestivo caracterizada por frecuentes evacuaciones y su consistencia líquida"},
        { letter: "d", answer: "diafragma", status: 0, question: "CON LA D. Músculo ancho situado entre las cavidades pectoral y abdominal y que tiene un importante papel en la respiración de los mamíferos"},
        { letter: "d", answer: "duna", status: 0, question: "CON LA D. Acumulación de arena en forma redondeada o de media luna que forma y empuja el viento en la playa o en el desierto"},
    ],
    letterE = [
        { letter: "e", answer: "ectoplasma", status: 0, question: "CON LA E. Gelatinoso y se encuentra debajo de la membrana plasmática. Los cazafantasmas medían su radiación"},
        { letter: "e", answer: "esqueleto", status: 0, question: "CON LA E. Conjunto de huesos articulados que sostiene y da consistencia al cuerpo de los vertebrados"},
        { letter: "e", answer: "estrella", status: 0, question: "CON LA E. Perseguida por los reyes magos"},
    ],

    letterF = [
        { letter: "f", answer: "facil", status: 0, question: "CON LA F. Que no requiere gran esfuerzo, capacidad o dificultad"},
        { letter: "f", answer: "fotografia", status: 0, question: "CON LA F. Técnica de obtención de imágenes por la acción química de la luz sobre una superficie con unas características determinadas"},
        { letter: "f", answer: "fiesta", status: 0, question: "CON LA F. Reunión de personas en un lugar para divertirse o celebrar un acontecimiento y en la que se suele bailar, comer, etc."},
    ],

    letterG = [
        { letter: "g", answer: "galaxia", status: 0, question: "CON LA G. Conjunto enorme de estrellas, polvo interestelar, gases y partículas"},
        { letter: "g", answer: "girasol", status: 0, question: "CON LA G. Planta de tallo grueso, alto y derecho, hojas pecioladas, en forma de corazón, flores amarillas y fruto con muchas semillas negruzcas y comestibles (pipas)"},
        { letter: "g", answer: "golf", status: 0, question: "CON LA G. Deporte individual en el que el objetivo es, utilizando diversos palos o bastones, introducir una pelota pequeña en un hollo en un campo de cesped"},
    ],

    letterH = [
        { letter: "h", answer: "harakiri", status: 0, question: "CON LA H. Suicidio ritual japonés por desentrañamiento"},
        { letter: "h", answer: "hortera", status: 0, question: "CON LA H. Que aunque pretende ser elegante o moderno resulta vulgar, ordinario y de mal gusto"},
        { letter: "h", answer: "hormona", status: 0, question: "CON LA H. Sustancia química producida por un órgano, o por parte de él, cuya función es la de regular la actividad de un tejido determinado"},
    ],

    letterI = [
        { letter: "i", answer: "iglesia", status: 0, question: "CON LA I. Templo cristiano"},
        { letter: "i", answer: "itsmo", status: 0, question: "CON LA I. Franja alargada y estrecha de terreno que une dos continentes, dos partes diferenciadas de un continente, o una península y un continente"},
        { letter: "i", answer: "imperativo", status: 0, question: "CON LA I. Modo verbal que expresa orden, ruego o mandato"},
    ],

    letterJ = [
        { letter: "j", answer: "jabali", status: 0, question: "CON LA J. Variedad salvaje del cerdo que sale en la película 'El Rey León', de nombre Pumba"},
        { letter: "j", answer: "japon", status: 0, question: "CON LA J. País asiatico consituido por una serie de islas conocido como el país del sol naciente"},
        { letter: "j", answer: "joroba", status: 0, question: "CON LA J. La tiene Quasimodo el campanero de Notre Dame"},
    ],
    
    letterK = [
        { letter: "k", answer: "kamikaze", status: 0, question: "CON LA K. Persona que se juega la vida realizando una acción temeraria"},
        { letter: "k", answer: "kiwi", status: 0, question: "CON LA K. Adorable pajaro que no puede volar"},
        { letter: "k", answer: "karma", status: 0, question: "CON LA K. En la religión budista y en el hinduismo, creencia según la cual toda acción tiene una fuerza dinámica que se expresa e influye en las sucesivas existencias del individuo"},
    ],

    letterL = [
        { letter: "l", answer: "licantropo", status: 0, question: "CON LA L. Hombre lobo"},
        { letter: "l", answer: "lustro", status: 0, question: "CON LA L. Período de cinco años"},
        { letter: "l", answer: "locura", status: 0, question: "CON LA L. Acción imprudente, insensata o poco razonable que realiza una persona de forma irreflexiva o temeraria"},
    ],

    letterM = [
        { letter: "m", answer: "misantropo", status: 0, question: "CON LA M. Persona que huye del trato con otras personas o siente gran aversión hacia ellas"},
        { letter: "m", answer: "minotauro", status: 0, question: "CON LA M. Mitad hombre mitad toro atrapado en un laberinto"},
        { letter: "m", answer: "miocardio", status: 0, question: "CON LA M. Parte muscular del corazón."},
    ],

    letterN = [
        { letter: "n", answer: "necedad", status: 0, question: "CON LA N. Demostración de poca inteligencia"},
        { letter: "n", answer: "nata", status: 0, question: "CON LA N. Derivado de la leche con el que se hacen postres"},
        { letter: "n", answer: "ninfa", status: 0, question: "CON LA N. Divinidad menor de la mitología grecolatina que habitaba en las fuentes, los bosques, las montañas o los ríos"},
    ],

    letterÑ = [
        { letter: "ñ", answer: "señal", status: 0, question: "CONTIENE LA Ñ. Indicio que permite deducir algo de lo que no se tiene un conocimiento directo."},
        { letter: "ñ", answer: "ñu", status: 0, question: "CON LA Ñ. Antílope que habita en grandes grupos en la sabana africana"},
        { letter: "ñ", answer: "ñoño", status: 0, question: "CON LA Ñ.  Que es apocado, melindroso y mojigato"},
    ],
    
    letterO = [
        { letter: "o", answer: "orco", status: 0, question: "CON LA O. Humanoide fantástico de apariencia terrible y bestial, piel de color verde creada por el escritor Tolkien"},
        { letter: "o", answer: "onomatopeya", status: 0, question: "CON LA O. Palabra que tiene sonidos que se asemejan a lo que significa"},
        { letter: "o", answer: "oca", status: 0, question: "CON LA O. Ave o juego de mesa donde tiras porque te toca"},
    ],

    letterP = [
        { letter: "p", answer: "protoss", status: 0, question: "CON LA P. Raza ancestral tecnológicamente avanzada que se caracteriza por sus grandes poderes psíonicos del videojuego StarCraft"},
        { letter: "p", answer: "postre", status: 0, question: "CON LA P. Alimento, generalmente dulce, que se sirve al finalizar una comida"},
        { letter: "p", answer: "pirata", status: 0, question: "CON LA P.Persona que navega sin licencia y se dedica a asaltar los barcos en alta mar o a robar en las costas"},
    ],

    letterQ = [
        { letter: "q", answer: "queso", status: 0, question: "CON LA Q. Producto obtenido por la maduración de la cuajada de la leche"},
        { letter: "q", answer: "quejica", status: 0, question: "CON LA Q. Que se queja o protesta con frecuencia, especialmente si lo hace por costumbre o sin una causa importante."},
        { letter: "q", answer: "quesadilla", status: 0, question: "CON LA Q. Pan de maíz, relleno de queso y azúcar, que se fríe en manteca"},
    ],

    letterR = [
        { letter: "r", answer: "raton", status: 0, question: "CON LA R. Roedor"},
        { letter: "r", answer: "rio", status: 0, question: "CON LA R. Corriente natural de agua que fluye permanentemente y va a desembocar en otra, en un lago o en el mar"},
        { letter: "r", answer: "router", status: 0, question: "CON LA R. Aparato que proporciona internet y que si no funciona bien nos desespera"},
    ],

    letterS = [
        { letter: "s", answer: "stackoverflow", status: 0, question: "CON LA S. Comunidad salvadora de todo desarrollador informático"},
        { letter: "s", answer: "skywalker", status: 0, question: "CON LA S. Apellido de Luke"},
        { letter: "s", answer: "stan", status: 0, question: "CON LA S. Nombre de pila del señor Lee, uno de los creadores más famosos de Marvel"},
    ],

    letterT = [
        { letter: "t", answer: "terminator", status: 0, question: "CON LA T. Película del director James Cameron que consolidó a Arnold Schwarzenegger como actor en 1984"},
        { letter: "t", answer: "tractor", status: 0, question: "CON LA T. Todo el mundo canta que tiene uno de color amarillo"},
        { letter: "t", answer: "tortuga", status: 0, question: "CON LA T. Las hay ninja y viven en el alcantarillado"},
    ],

    letterU = [
        { letter: "u", answer: "unamuno", status: 0, question: "CON LA U. Escritor y filósofo español de la generación del 98 autor del libro 'Niebla' en 1914"},
        { letter: "u", answer: "urano", status: 0, question: "CON LA U. Septimo planeta del sistema solar"},
        { letter: "u", answer: "utopia", status: 0, question: "CON LA U. Plan o sistema ideal de gobierno en el que se concibe una sociedad perfecta y justa, donde todo discurre sin conflictos y en armonía"},
    ],

    letterV = [
        { letter: "v", answer: "vikingos", status: 0, question: "CON LA V. Nombre dado a los miembros de los pueblos nórdicos originarios de Escandinavia, famosos por sus incursiones y pillajes en Europa"},
        { letter: "v", answer: "variable", status: 0, question: "CON LA V. Aquello que no contiene nunca lo que necesitas mientras programas"},
        { letter: "v", answer: "valle", status: 0, question: "CON LA V. Terreno llano de nivel más bajo que el que lo rodea"},
    ],

    letterW = [
        { letter: "w", answer: "sandwich", status: 0, question: "CONTIENE LA W. Emparedado hecho con dos rebanadas de pan entre las cuales se coloca jamón y queso"},
        { letter: "w", answer: "whisky", status: 0, question: "CON LA W. Bebida alcohólica de alta graduación que se obtiene por destilación de cebada y otros cereales."},
        { letter: "w", answer: "Wifi", status: 0, question: "CON LA W. Modalidad de internet sin cable"},
    ],

    letterX = [
        { letter: "x", answer: "botox", status: 0, question: "CONTIENE LA X. Toxina bacteriana utilizada en cirujía estética"},
        { letter: "x", answer: "xilofono", status: 0, question: "CON LA X. Instrumento musical de percusión formado por una serie de láminas de madera dispuestas horizontalmente y ordenadas según su tamaño que se toca con dos o cuatro macillas."},
        { letter: "x", answer: "xenofobia", status: 0, question: "CON LA X. Rechazo a los extranjeros"},
    ],

    letterY = [
        { letter: "y", answer: "peyote", status: 0, question: "CONTIENE LA Y. Pequeño cáctus conocido por sus alcaloides psicoactivos utilizado de forma ritual y medicinal  por indígenas americanos"},
        { letter: "y", answer: "yogurt", status: 0, question: "CON LA Y. Derivado lácteo obtenido mediante la fermentación de la leche​ por medio de bacterias de los géneros Lactobacillus y Streptococcus"},
        { letter: "y", answer: "yoga", status: 0, question: "CON LA Y. Conjunto de técnicas de concentración derivadas de esta doctrina filosófica que se practican para conseguir un mayor control físico y mental."},
    ],
    LetterZ = [
        { letter: "z", answer: "zen", status: 0, question: "CON LA Z. Escuela de budismo que busca la experiencia de la sabiduría más allá del discurso racional"}, 
        { letter: "z", answer: "zorro", status: 0, question: "CON LA Z. Candio o heroe enmascarado"}, 
        { letter: "z", answer: "zumo", status: 0, question: "CON LA Z. Líquido contenido en el tejido de las frutas que puede extraerse por presión, cocción, etc., y beberse"}, 
    ],
];

// funcion que gestiona todo el juego
function pasapalabra(){
    var usuario = prompt('¡Hola! cual es tu nombre de usuario?','Introduce tu nombre de usuario.');
    do {
        palabrasAcertadas = 0;
        palabrasFalladas = 0;
        var totalPreguntasRespondidas = 0;
        var preguntasPartidaActual = generadorPreguntas(questions, preguntasPartidaActual);
        do {
            var continuar = turn(preguntasPartidaActual);
            totalPreguntasRespondidas = palabrasAcertadas + palabrasFalladas;
        } while (continuar && preguntasPartidaActual.length != totalPreguntasRespondidas);

        if (preguntasPartidaActual.length === totalPreguntasRespondidas) {
            finPartida(usuario, palabrasAcertadas, palabrasFalladas);
            var preguntaReempezarPartida = confirm('¿Quieres volver a jugar?')
        } else {
            console.log('Palabras acertadas: ' + palabrasAcertadas);
            console.log('Palabras falladas: ' + palabrasFalladas);
            break;
        }
    } while (preguntaReempezarPartida);
};
var ranking = [];
var palabrasAcertadas = 0;
var palabrasFalladas = 0;

// Selector de las preguntas que se usaran durante la partida actual
function generadorPreguntas (arrayPreguntasGeneral, arrayPreguntasNuevo){
    var arrayPreguntasNuevo = [];
    for (var i in arrayPreguntasGeneral){
        var numeroPregunta = randomNumber(3);
        var preguntaActual = arrayPreguntasGeneral[i][numeroPregunta];
        preguntaActual = Object.assign({}, preguntaActual);
        arrayPreguntasNuevo.push(preguntaActual);
    }
    return arrayPreguntasNuevo;
};

// Generador de numeros aleatorios.
function randomNumber(num){
    var numero = Math.random()*num;
    numero = Math.floor(numero);
    return numero;
};

// Gestor de turnos.
function turn(arrayPreguntas){
    for (var i in arrayPreguntas){
        // comprobamos si la pregunta ha sido respuesta con anterioridad o no.
        if (arrayPreguntas[i].status === 0){
            var pregunta = arrayPreguntas[i].question;
            respuesta = prompt(pregunta, 'Responde sin accentos, di \"Pasapalabra\" para pasar o \"END\" para salir de la partida.');
            respuesta = respuesta.toLowerCase();

            //Gestor que deriba las respuestas.
            if (respuesta === 'pasapalabra'){
                console.log('Nos saltamos la letra ' + arrayPreguntas[i].letter.toUpperCase() + '. Siguiente palabra');
            } else if (respuesta === arrayPreguntas[i].answer) {
                console.log('¡Has acertado la letra '+ arrayPreguntas[i].letter.toUpperCase() +'! Un puntoj más al marcador.'),
                palabrasAcertadas++;
                arrayPreguntas[i].status = 1;
            } else if (respuesta === 'end'){
                return false;
            } else {
                console.log('Has fallado la letra '+ arrayPreguntas[i].letter.toUpperCase() +', siguiente palabra.')
                palabrasFalladas++;
                arrayPreguntas[i].status = 1;
            }
        }
    }
    return true;
};


// fin partida
function finPartida(usuario, puntosPositivos, puntosNegativos) {
    var resultados = {user: usuario, score: puntosPositivos, errors: puntosNegativos};
    ranking.push(resultados);
    ranking = ranking.sort(ordenadoDescendente);
    var posicion = ranking.indexOf(resultados);
    posicion++;
    console.log('Tu puntuación:')
    console.log(posicion +'º - Aciertos: ' + puntosPositivos + ' - Fallos: ' + puntosNegativos);
    mostrarRanking(ranking);
};
// Funcion de ordenado del array de rankings de forma que la mayor puntuación quede en primer lugar y se ordene de forma descendente.
function ordenadoDescendente (user1, user2,){
    if (user1.score>user2.score){
        return -1;
    } else if (user1.score<user2.score){
        return 1;
    } else {
        return 0;
    }
};
// Muestra el array Ranking a una versión amigable para el usuario en consola.
function mostrarRanking(arrayRanking){
    var posicionUsuario = 1;
    for(i in arrayRanking){
        console.log(posicionUsuario + '-' + 'Usuario: ' + arrayRanking[i].user + ' Aciertos: ' + arrayRanking[i].score + ' Fallos: ' + arrayRanking[i].errors);
        posicionUsuario++;
    }
};
